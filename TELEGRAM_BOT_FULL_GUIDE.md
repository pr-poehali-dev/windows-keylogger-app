# ü§ñ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: Telegram –±–æ—Ç —Å –∞–≤—Ç–æ–ø–∞—Ä—Å–∏–Ω–≥–æ–º –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–æ—Ç–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤** ‚Äî –±–æ—Ç —Å–∞–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é  
‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏** ‚Äî –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ —Å—Ç–∞—Ç–µ–π  
‚úÖ **–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –º–∞—Ä–∏–π—Å–∫–∏–π** ‚Äî GPT-4 –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∫–∞–∂–¥—É—é –Ω–æ–≤–æ—Å—Ç—å  
‚úÖ **–ú–æ–¥–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ª–∏—á–∫—É** ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤–∞–º –≤ Telegram —Å –∫–Ω–æ–ø–∫–∞–º–∏ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"/"–û—Ç–∫–ª–æ–Ω–∏—Ç—å"  
‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª** ‚Äî –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏  
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ (–±–µ–∑ –¥—É–±–ª–µ–π)  

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 —à–∞–≥–æ–≤)

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á–∏

–í–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å 4 —Å–µ–∫—Ä–µ—Ç–∞ (—Ñ–æ—Ä–º—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ—è–≤–∏–ª–∏—Å—å –≤—ã—à–µ ‚¨ÜÔ∏è):

#### 1Ô∏è‚É£ OPENAI_API_KEY
**–ì–¥–µ –≤–∑—è—Ç—å:**
1. https://platform.openai.com/api-keys
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-proj-...`)

**–ü—Ä–∏–º–µ—Ä:** `sk-proj-aBcDeFgHiJkLmNoPqRsTuVwXyZ123456789`

---

#### 2Ô∏è‚É£ TELEGRAM_BOT_TOKEN
**–ì–¥–µ –≤–∑—è—Ç—å:**
1. –ù–∞–ø–∏—à–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –∏ username –±–æ—Ç–∞
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

**–ü—Ä–∏–º–µ—Ä:** `7123456789:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw`

---

#### 3Ô∏è‚É£ MODERATOR_CHAT_ID
**–ì–¥–µ –≤–∑—è—Ç—å:**
1. –ù–∞–ø–∏—à–∏—Ç–µ [@userinfobot](https://t.me/userinfobot) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à ID (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `123456789`)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ —á–∏—Å–ª–æ

**–ü—Ä–∏–º–µ—Ä:** `123456789`

---

#### 4Ô∏è‚É£ CHANNEL_ID
**–ì–¥–µ –≤–∑—è—Ç—å:**
1. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª –≤ Telegram
2. –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∫–∞–Ω–∞–ª–∞
3. –í–∫–ª—é—á–∏—Ç–µ –ø—Ä–∞–≤–æ "–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π"
4. –ü–µ—Ä–µ—à–ª–∏—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
5. –û–Ω –ø–æ–∫–∞–∂–µ—Ç `Forwarded from chat: -1001234567890`
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Å –º–∏–Ω—É—Å–æ–º

**–ü—Ä–∏–º–µ—Ä:** `-1001234567890`

---

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è –±–æ—Ç–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
curl "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/setWebhook?url=https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d"
```

–ó–∞–º–µ–Ω–∏—Ç–µ `<–í–ê–®_–¢–û–ö–ï–ù>` –Ω–∞ –≤–∞—à TELEGRAM_BOT_TOKEN.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getWebhookInfo"
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `"url": "https://functions.poehali.dev/..."`

---

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–æ–≤–æ—Å—Ç–µ–π

**–ß–µ—Ä–µ–∑ API:**

```bash
curl -X POST https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d \
  -H "Content-Type: application/json" \
  -d '{
    "action": "add_source",
    "name": "–ú–∞—Ä–∏–π –≠–ª –Ω–æ–≤–æ—Å—Ç–∏",
    "url": "https://mari-el.gov.ru/news/",
    "interval": 60
  }'
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–¥–ª—è –≤–∞—Å)
- `url` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å–ø–∏—Å–∫–æ–º –Ω–æ–≤–æ—Å—Ç–µ–π
- `interval` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö (60 = –∫–∞–∂–¥—ã–π —á–∞—Å)

---

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π

**–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:**

```bash
curl -X POST https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d \
  -H "Content-Type: application/json" \
  -d '{"action": "check_sources"}'
```

–ë–æ—Ç –Ω–∞–π–¥–µ—Ç –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏, –ø–µ—Ä–µ–≤–µ–¥–µ—Ç –∏—Ö –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞–º –≤ Telegram –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏!

---

### –®–∞–≥ 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ cron –∏–ª–∏ GitHub Actions.

**GitHub Actions** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ):

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/news-checker.yml`:

```yaml
name: Check News Sources

on:
  schedule:
    - cron: '0 * * * *'  # –ö–∞–∂–¥—ã–π —á–∞—Å
  workflow_dispatch:  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Check news sources
        run: |
          curl -X POST https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d \
            -H "Content-Type: application/json" \
            -d '{"action": "check_sources"}'
```

–¢–µ–ø–µ—Ä—å –±–æ—Ç –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–π —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## üì± –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—è

### 1. –ë–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—É—é –Ω–æ–≤–æ—Å—Ç—å

–ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é.

### 2. –í–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram

**–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:**

```
üì∞ –ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏

–û—Ä–∏–≥–∏–Ω–∞–ª:
–í –ú–∞—Ä–∏–π –≠–ª –æ—Ç–∫—Ä—ã–ª—Å—è –Ω–æ–≤—ã–π –ø–∞—Ä–∫

–ü–µ—Ä–µ–≤–æ–¥:
–ú–∞—Ä–∏–π –≠–ª—ã—à—Ç–µ —É –ø–∞—Ä–∫ –ø–æ—á—ã–ª—Ç–µ—à

[–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç...]

–ò—Å—Ç–æ—á–Ω–∏–∫: https://example.com/news/123

[‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
```

–ï—Å–ª–∏ —É –Ω–æ–≤–æ—Å—Ç–∏ –µ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫–∞ ‚Äî –æ–Ω–∞ —Ç–æ–∂–µ –±—É–¥–µ—Ç –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏!

### 3. –í—ã –Ω–∞–∂–∏–º–∞–µ—Ç–µ –∫–Ω–æ–ø–∫—É

**‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å** ‚Üí –Ω–æ–≤–æ—Å—Ç—å —Å—Ä–∞–∑—É –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –∫–∞–Ω–∞–ª —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π  
**‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å** ‚Üí –Ω–æ–≤–æ—Å—Ç—å –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω–∞—è

### 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤–∞–º:
- `‚úÖ –ù–æ–≤–æ—Å—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞!` ‚Äî –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
- `‚ùå –ù–æ–≤–æ—Å—Ç—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞` ‚Äî –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ

---

## üñºÔ∏è –†–∞–±–æ—Ç–∞ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ù–∞—Ö–æ–¥–∏—Ç –ø–µ—Ä–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç–∞—Ç—å–µ
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤ –±–∞–∑—É
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–∞–º –≤ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `sendPhoto`
4. –ü—É–±–ª–∏–∫—É–µ—Ç –≤ –∫–∞–Ω–∞–ª —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π —á–µ—Ä–µ–∑ `sendPhoto`

**–ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è** ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç —Ö—Ä–∞–Ω–∏—Ç –≤ PostgreSQL:

### –¢–∞–±–ª–∏—Ü–∞ `news_items`
- `url` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–æ–≤–æ—Å—Ç—å (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è)
- `title` ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
- `original_text` ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
- `translated_title` ‚Äî –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
- `translated_text` ‚Äî –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
- `image_url` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É
- `status` ‚Äî —Å—Ç–∞—Ç—É—Å (`new`, `pending_moderation`, `published`, `rejected`)
- `published_at` ‚Äî –¥–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### –¢–∞–±–ª–∏—Ü–∞ `news_sources`
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `url` ‚Äî URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ —Å–ø–∏—Å–∫–æ–º –Ω–æ–≤–æ—Å—Ç–µ–π
- `check_interval_minutes` ‚Äî –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
- `last_checked_at` ‚Äî –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä—è–ª–∏
- `is_active` ‚Äî –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –∏—Å—Ç–æ—á–Ω–∏–∫

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π:** –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç URL –Ω–æ–≤–æ—Å—Ç–∏ ‚Äî –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç.

---

## üìù API –º–µ—Ç–æ–¥—ã

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π

```bash
POST /
{
  "action": "check_sources"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "sources_checked": 1,
  "new_articles": 3,
  "articles": [...]
}
```

---

### 2. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫

```bash
POST /
{
  "action": "add_source",
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ",
  "url": "https://example.com/news",
  "interval": 60
}
```

---

### 3. –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏

```bash
POST /
{
  "action": "parse",
  "url": "https://example.com/article/123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "original": {
    "title": "...",
    "text": "...",
    "image": "https://...",
    "url": "..."
  },
  "translated": {
    "title": "...",
    "text": "..."
  }
}
```

---

### 4. Webhook –¥–ª—è Telegram

```bash
POST /
{
  "action": "webhook",
  "callback_query": {
    "data": "approve_123",
    "message": {...}
  }
}
```

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–æ–∫.

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

```javascript
// 1. –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
await fetch('https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    action: 'add_source',
    name: 'Mari News',
    url: 'https://mari-el.gov.ru/news/',
    interval: 30
  })
});

// 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
await fetch('https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ action: 'check_sources' })
});
```

---

### –ü—Ä–∏–º–µ—Ä 2: –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏

```javascript
const response = await fetch('https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    action: 'parse',
    url: 'https://example.com/news/article-123'
  })
});

const result = await response.json();
console.log('–ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫:', result.translated.title);
console.log('–ö–∞—Ä—Ç–∏–Ω–∫–∞:', result.original.image);
```

---

## ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ GitHub Actions

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/news-bot.yml`:

```yaml
name: News Bot Auto-Check

on:
  schedule:
    - cron: '0 */2 * * *'  # –ö–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
  workflow_dispatch:

jobs:
  check_news:
    runs-on: ubuntu-latest
    steps:
      - name: Check news sources
        run: |
          curl -X POST https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d \
            -H "Content-Type: application/json" \
            -d '{"action":"check_sources"}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. MODERATOR_CHAT_ID –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (—á–∏—Å–ª–æ –±–µ–∑ –∫–∞–≤—ã—á–µ–∫)
2. TELEGRAM_BOT_TOKEN –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
3. OPENAI_API_KEY –∞–∫—Ç–∏–≤–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/getMe"
```

---

### –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Webhook –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
curl "https://api.telegram.org/bot<–í–ê–®_–¢–û–ö–ï–ù>/setWebhook?url=https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d"
```

---

### –ë–æ—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤–æ—Å—Ç–∏

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –Ω–æ–≤–æ—Å—Ç–µ–π)
2. –°–∞–π—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã
3. –ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤ –ë–î.

---

### –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏
2. URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π (–±–µ–∑ https://)
3. –§–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Telegram

**–†–µ—à–µ–Ω–∏–µ:** –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```sql
-- –°–∫–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –±–∞–∑–µ
SELECT status, COUNT(*) FROM news_items GROUP BY status;

-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –Ω–æ–≤–æ—Å—Ç–µ–π
SELECT url, title, status, created_at FROM news_items ORDER BY created_at DESC LIMIT 10;

-- –ê–∫—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
SELECT name, url, last_checked_at FROM news_sources WHERE is_active = true;
```

---

## üéì –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–∞–π—Ç–æ–≤

–û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–ø–∏—Å—å –≤ –ë–î:

```sql
UPDATE news_sources 
SET 
  selector_title = 'h2.news-title',
  selector_text = 'div.news-content p',
  selector_image = 'img.news-image'
WHERE id = 1;
```

---

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

–î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏:

```bash
# –ò—Å—Ç–æ—á–Ω–∏–∫ 1: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
curl -X POST ... -d '{"action":"add_source","name":"Site1","url":"...","interval":30}'

# –ò—Å—Ç–æ—á–Ω–∏–∫ 2: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞
curl -X POST ... -d '{"action":"add_source","name":"Site2","url":"...","interval":120}'
```

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é
2. **–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã:** –ù–µ —Å—Ç–∞–≤—å—Ç–µ —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (–º–∏–Ω–∏–º—É–º 30 –º–∏–Ω—É—Ç)
3. **–ú–æ–¥–µ—Ä–∞—Ü–∏—è:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
4. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –°–æ–æ–±—â–µ—Å—Ç–≤–æ: https://t.me/+QgiLIa1gFRY4Y2Iy
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://docs.poehali.dev

---

**URL –≤–∞—à–µ–≥–æ –±–æ—Ç–∞:**
```
https://functions.poehali.dev/85b72ebd-10f6-4e6b-9ae2-6a964c714f5d
```

–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á–∏ –≤—ã—à–µ –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏! üöÄ
